<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Management Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 18px;
        }

        .demo-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #4299e1;
        }

        .demo-section h3 {
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            border-top: 4px solid #38a169;
        }

        .feature-card h4 {
            color: #2d3748;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-card p {
            color: #4a5568;
            line-height: 1.6;
        }

        .plan-showcase {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .plan-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .plan-card:hover {
            border-color: #4299e1;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .plan-card.popular::before {
            content: "Most Popular";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #4299e1;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        .plan-card h4 {
            color: #2d3748;
            margin-bottom: 10px;
        }

        .plan-price {
            font-size: 28px;
            font-weight: bold;
            color: #2b6cb0;
            margin-bottom: 15px;
        }

        .plan-features {
            list-style: none;
            text-align: left;
        }

        .plan-features li {
            padding: 5px 0;
            color: #4a5568;
            position: relative;
            padding-left: 25px;
        }

        .plan-features li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #38a169;
            font-weight: bold;
        }

        .btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .access-info {
            background: #fffbeb;
            border: 1px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }

        .access-info h3 {
            color: #92400e;
            margin-bottom: 10px;
        }

        .access-info p {
            color: #78350f;
            line-height: 1.6;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Consolas', monospace;
            margin-top: 15px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-crown"></i> Plan Management System</h1>
            <p>Service Agent Interface for Organization Plan Management</p>
        </div>

        <div class="demo-section">
            <h3><i class="fas fa-info-circle"></i> Overview</h3>
            <p>This demo showcases the new <strong>Manage Plans</strong> page that has been added to the org-admin portal. This feature is specifically designed for service agents and colleagues to manage organization subscriptions without customer access.</p>
        </div>

        <div class="demo-section">
            <h3><i class="fas fa-cogs"></i> Key Features</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="fas fa-chart-line"></i> Real-time Usage Monitoring</h4>
                    <p>Track agent count, knowledge base storage, and monthly conversations with visual progress bars and limit warnings.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-exchange-alt"></i> Plan Management</h4>
                    <p>Upgrade, downgrade, or change organization plans with confirmation dialogs and impact analysis.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-clock"></i> Trial Extensions</h4>
                    <p>Extend trial periods for organizations with configurable day ranges and automatic tracking.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-refresh"></i> Usage Reset</h4>
                    <p>Reset usage counters for conversations and storage with full audit logging.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-percent"></i> Discount Management</h4>
                    <p>Apply promotional discounts and special pricing with verification workflows.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="fas fa-history"></i> Activity Tracking</h4>
                    <p>View complete plan change history with timestamps, user attribution, and impact details.</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3><i class="fas fa-layer-group"></i> Available Plans</h3>
            <div class="plan-showcase">
                <div class="plan-card">
                    <h4>Free</h4>
                    <div class="plan-price">$0<span style="font-size: 14px; color: #666;">/month</span></div>
                    <ul class="plan-features">
                        <li>1 agent</li>
                        <li>50MB knowledge base</li>
                        <li>100 monthly conversations</li>
                        <li>Basic analytics</li>
                        <li>Email support</li>
                    </ul>
                    <button class="btn">Current Plan</button>
                </div>
                <div class="plan-card popular">
                    <h4>Professional</h4>
                    <div class="plan-price">$79<span style="font-size: 14px; color: #666;">/month</span></div>
                    <ul class="plan-features">
                        <li>Up to 10 agents</li>
                        <li>1GB knowledge base</li>
                        <li>2,500 monthly conversations</li>
                        <li>Custom branding</li>
                        <li>Priority support</li>
                        <li>Advanced analytics</li>
                    </ul>
                    <button class="btn">Upgrade Plan</button>
                </div>
                <div class="plan-card">
                    <h4>Business</h4>
                    <div class="plan-price">$149<span style="font-size: 14px; color: #666;">/month</span></div>
                    <ul class="plan-features">
                        <li>Up to 25 agents</li>
                        <li>5GB knowledge base</li>
                        <li>10,000 monthly conversations</li>
                        <li>API access</li>
                        <li>24/7 phone support</li>
                        <li>Data export</li>
                        <li>Advanced AI features</li>
                    </ul>
                    <button class="btn">Upgrade Plan</button>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3><i class="fas fa-code"></i> Implementation Details</h3>
            <p>The plan management system includes:</p>
            <div class="code-block">
✅ New "Manage Plans" tab in org-admin portal (service agents only)
✅ Backend API endpoints for plan operations (/api/global-admin/organizations/current/*)
✅ Real-time usage tracking with MongoDB aggregation
✅ Plan change confirmation modals with impact analysis
✅ Service agent role-based access control
✅ Comprehensive error handling and notifications
✅ Integration with existing subscription system
            </div>
        </div>

        <div class="access-info">
            <h3><i class="fas fa-shield-alt"></i> Access Control</h3>
            <p><strong>Service Agent Only Access:</strong> The Manage Plans tab is hidden by default and only visible to users with service agent privileges. This ensures customers cannot access internal plan management tools while providing staff with powerful subscription management capabilities.</p>
            <p><strong>Implementation:</strong> The tab is controlled by CSS classes and JavaScript role checking, with backend API validation for all plan management operations.</p>
        </div>
    </div>

    <script>
        // Demo functionality
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (this.textContent === 'Current Plan') {
                    alert('✅ This is the current plan for the organization');
                } else {
                    alert('🔄 In the real system, this would open the plan change confirmation modal');
                }
            });
        });

        // Add some animation
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.feature-card, .plan-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.6s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 50);
                }, index * 100);
            });
        });
    </script>
</body>
</html>